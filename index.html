<!DOCTYPE html>
<html lang="uk">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>–°–∞–º–°–æ–±—ñ–®–µ—Ñ | –†–æ–±–æ—Ç–∞ –≤ –û–¥–µ—Å—ñ</title>
  <meta name="description" content="–°–∞–º–°–æ–±—ñ–®–µ—Ñ ‚Äî –ø–æ—à—É–∫ –ø—ñ–¥—Ä–æ–±—ñ—Ç–∫—É —Ç–∞ –≤–∏–∫–æ–Ω–∞–≤—Ü—ñ–≤ –≤ –û–¥–µ—Å—ñ —Ç–∞ –æ–±–ª–∞—Å—Ç—ñ. –î–æ–¥–∞–≤–∞–π—Ç–µ –∑–∞–≤–¥–∞–Ω–Ω—è —Ç–∞ –∑–Ω–∞—Ö–æ–¥—å—Ç–µ —Ä–æ–±–æ—Ç—É!">
  <link rel="icon" type="image/png" href="https://i.ibb.co/HLc01jWL/22c6c8c1-5106-4955-bec9-7c071a2a41e3.png"/>
  <style>
    body {font-family: Arial,sans-serif; background:#f5f7fc; margin:0; padding:0;}
    .main-app {max-width:430px; margin:44px auto 0; padding:0 6px;}
    .logo {width:84px; display:block; margin:16px auto 18px; border-radius:22px;}
    .add-btn-main {background:#2b81f7; color:#fff; border:none; font-weight:700; font-size:1.14em; padding:12px 18px; border-radius:13px; margin:24px auto; display:block; box-shadow:0 2px 12px #d7e4f540; width:100%;transition:.25s;}
    .ads-list {margin-top:22px;}
    .ad-card {background:#fff; border-radius:13px; padding:13px 13px 8px 13px; margin-bottom:12px; box-shadow:0 1px 9px #dbe3f330;}
    .ad-title {font-size:16px; margin-bottom:5px; font-weight:600;}
    .ad-meta {font-size:13px; color:#3167ae; margin-bottom:3px;}
    .ad-actions {display:flex; align-items:center; justify-content:space-between;}
    .ad-likes {font-size:14px; cursor:pointer; color:#2093e7; display:flex; align-items:center;}
    .ad-likes.liked {color:#ffad3d;}
    .ad-likes span {margin-left:3px;}
    .ad-views {font-size:13px; color:#b6cbe8;}
    .modal-bg {position:fixed;z-index:10;top:0;left:0;width:100vw;height:100vh;background:#0005;display:flex;align-items:center;justify-content:center;animation:fadeIn .7s;transition:.4s;opacity:0;pointer-events:none;}
    .modal-bg.show {opacity:1; pointer-events:all;}
    .modal-card {background:#fff; border-radius:17px; box-shadow:0 4px 28px #b1d6fc45; width:340px; padding:26px 18px 12px; text-align:left; animation:popin .5s;}
    @keyframes popin {0%{transform:scale(.9);opacity:0;}100%{transform:scale(1);opacity:1;}}
    .modal-card h2 {font-size:18px; margin:0 0 14px;}
    .modal-field {margin-bottom:16px;}
    .modal-field input, .modal-field textarea {width:100%; font-size:15px; padding:9px 9px; border-radius:8px; border:1px solid #d7e4f5; outline:none;}
    .modal-btns {display:flex;justify-content:flex-end;gap:15px;}
    .modal-btn {padding:10px 21px; font-size:15px; font-weight:700; border-radius:10px; border:none; background:#2186e7; color:#fff; cursor:pointer;}
    .modal-btn.cancel {background:#f0f0f0; color:#205;}
    .msg {padding:12px 9px; margin:19px 0; background:#fff4cc; border-radius:10px; color:#ae820c; text-align:center; font-size:1.13em; opacity:0; transition:.3s;}
    .msg.show {opacity:1;}
    .fadein {animation:fadeIn .8s;}
    @keyframes fadeIn {from{opacity:0;}to{opacity:1;}}
    @media (max-width:500px) {.main-app {margin-top:14px;}}
  </style>
</head>
<body>
  <div class="main-app fadein" id="main-app">
    <img src="https://i.ibb.co/HLc01jWL/22c6c8c1-5106-4955-bec9-7c071a2a41e3.png" class="logo" alt="logo"/>
    <button class="add-btn-main" id="add-btn">–î–æ–¥–∞—Ç–∏ –æ–≥–æ–ª–æ—à–µ–Ω–Ω—è</button>
    <div class="ads-list" id="ads-list"></div>
  </div>
  <!-- –ú–æ–¥–∞–ª–∫–∞ –¥–æ–¥–∞–≤–∞–Ω–Ω—è -->
  <div class="modal-bg" id="add-modal">
    <div class="modal-card">
      <h2>–î–æ–¥–∞—Ç–∏ –æ–≥–æ–ª–æ—à–µ–Ω–Ω—è</h2>
      <form id="add-form">
        <div class="modal-field"><textarea id="task-desc" placeholder="–û–ø–∏—à—ñ—Ç—å –∑–∞–≤–¥–∞–Ω–Ω—è..." required minlength="10"></textarea></div>
        <div class="modal-field"><input type="number" min="0" id="task-price" placeholder="–¶—ñ–Ω–∞, –≥—Ä–Ω" required></div>
        <div class="modal-field"><input type="tel" id="task-phone" placeholder="–¢–µ–ª–µ—Ñ–æ–Ω" required></div>
        <div class="modal-btns">
          <button type="button" class="modal-btn cancel" id="cancel-modal">–°–∫–∞—Å—É–≤–∞—Ç–∏</button>
          <button type="submit" class="modal-btn">–û–ø—É–±–ª—ñ–∫—É–≤–∞—Ç–∏</button>
        </div>
      </form>
    </div>
  </div>
  <div class="msg" id="msg"></div>
  <script>
    function $(x) {return document.getElementById(x);}
    function showMsg(txt) {
      $('msg').textContent = txt;
      $('msg').classList.add('show');
      setTimeout(()=>{$('msg').classList.remove('show');},2700);
    }
    // –ó–∞–≥—Ä—É–∑–∫–∞ –æ–±—ä—è–≤–ª–µ–Ω–∏–π –∏–∑ localStorage
    function loadAds() {
      let a = localStorage.getItem('sshef_ads');
      return a ? JSON.parse(a) : [];
    }
    // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –æ–±—ä—è–≤–ª–µ–Ω–∏–π –≤ localStorage
    function saveAds(ads) {
      localStorage.setItem('sshef_ads', JSON.stringify(ads));
    }
    // –ü—Ä–æ–≤–µ—Ä–∫–∞ —É–∫—Ä–∞–∏–Ω—Å–∫–æ–≥–æ –Ω–æ–º–µ—Ä–∞
    function validUAphone(phone) {
      let p = phone.replace(/\D/g, '');
      return (/^380\d{9}$/.test(p) || /^0\d{9}$/.test(p));
    }
    // –û—Ç—Ä–∏—Å–æ–≤–∫–∞ –æ–±—ä—è–≤–ª–µ–Ω–∏–π
    function renderAds() {
      let wrap = $('ads-list');
      let ads = loadAds();
      if(!ads.length) {
        wrap.innerHTML = '<div style="text-align:center;color:#8a8c9b;">–û–≥–æ–ª–æ—à–µ–Ω—å —â–µ –Ω–µ–º–∞—î...</div>';
        return;
      }
      wrap.innerHTML = '';
      ads.forEach(ad=>{
        let adHTML = `<div class="ad-card">
          <div class="ad-title">${ad.desc}</div>
          <div class="ad-meta">üí∞ <b>${ad.price}</b> –≥—Ä–Ω | ${ad.phone}</div>
          <div class="ad-meta" style="font-size:12px;">${ad.time}</div>
        </div>`;
        wrap.innerHTML += adHTML;
      });
    }
    // –°–æ–±—ã—Ç–∏—è
    $('add-btn').onclick = ()=>{ $('add-modal').classList.add('show'); };
    $('cancel-modal').onclick = ()=>{ $('add-modal').classList.remove('show'); $('add-form').reset();};
    $('add-form').onsubmit = function(e){
      e.preventDefault();
      let desc=$('task-desc').value.trim(),price=$('task-price').value.trim(),phone=$('task-phone').value.trim();
      if(desc.length<10)return showMsg('–û–ø–∏—Å –º–∞—î –±—É—Ç–∏ –≤—ñ–¥ 10 —Å–∏–º–≤–æ–ª—ñ–≤!');
      if(!validUAphone(phone))return showMsg('–¢–µ–ª–µ—Ñ–æ–Ω –Ω–µ–∫–æ—Ä–µ–∫—Ç–Ω–∏–π!');
      let ads = loadAds();
      let ad = {
        desc: desc,
        price: price,
        phone: phone,
        time: new Date().toLocaleString("uk-UA")
      };
      ads.unshift(ad); // –ù–æ–≤–æ–µ –Ω–∞–≤–µ—Ä—Ö—É
      saveAds(ads);
      $('add-modal').classList.remove('show');$('add-form').reset();
      showMsg('–û–≥–æ–ª–æ—à–µ–Ω–Ω—è –¥–æ–¥–∞–Ω–æ!');
      renderAds();
    };
    window.onload = renderAds;
  </script>
</body>
</html>
